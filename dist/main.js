(()=>{"use strict";const e=document.querySelectorAll("a");for(const t of e)t.addEventListener("click",(e=>{e.preventDefault();const o=t.getAttribute("href");"#close"!==o&&document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}));const t=e=>{const t=document.getElementById(e),o=document.createElement("div"),n=document.querySelectorAll(`#${e} input`);o.style.cssText="font-size: 2rem; color: white",t.addEventListener("input",(e=>{e.target.matches('input[name="user_phone"]')&&(e.target.setAttribute("pattern","^[0-9-+s()]{11,18}$"),e.target.value=e.target.value.replace(/[^\d\+]/g,""))})),t.addEventListener("input",(e=>{e.target.matches('input[name="user_email"]')&&(e.target.setAttribute("pattern","^[A-Za-z0-9.-_]+@[A-Za-z]+.[A-Za-z]{2,3}$"),e.target.value=e.target.value.replace(/[^A-Za-z\d\.\-@_]/g,""))})),t.addEventListener("input",(e=>{e.target.matches('input[name="user_name"]')&&(e.target.setAttribute("pattern","[А-Яа-яЁё ]{2,}"),e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s]|/g,""))})),t.addEventListener("input",(e=>{e.target.matches('input[name="user_message"]')&&(e.target.value=e.target.value.replace(/[^А-Яа-яЁё\d\s,\.\?\(\)\*\+\$-:;!'"@&%#№]/g,""))})),t.addEventListener("submit",(e=>{e.preventDefault(),t.append(o),o.textContent="Загрузка...";const a=new FormData(t);let r={};var c;a.forEach(((e,t)=>r[t]=e)),(c=r,new Promise(((e,t)=>{const o=new XMLHttpRequest;o.addEventListener("readystatechange",(()=>{4===o.readyState&&(200===o.status?e():t(o.statusText))})),o.open("POST","server.php"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(c))}))).then((()=>o.textContent="Спасибо! Мы скоро с вами свяжемся!")).catch((e=>{o.textContent="Что-то пошло не так...",console.log(e)})),n.forEach((e=>e.value=""))}))};(function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");let a;a=setInterval((function(){const r=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/3600),minutes:n,seconds:o}}();r.timeRemaining<=0?(t.textContent="00",o.textContent="00",n.textContent="00",clearInterval(a)):(t.textContent=r.hours<10?"0"+r.hours:r.hours,o.textContent=r.minutes<10?"0"+r.minutes:r.minutes,n.textContent=r.seconds<10?"0"+r.seconds:r.seconds)}),1e3)})("28 april 2021"),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{let o=t.target;o.closest(".menu")||o.classList.contains("close-btn")||o.matches("ul>li>a")?e.classList.toggle("active-menu"):o.closest(".active-menu")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=(document.querySelector(".popup-close"),document.querySelector(".popup-content"));let n,a=0;const r=()=>{a++,parseFloat(o.style.left)<38?o.style.left=a+"%":(clearInterval(n),a=0)};e.forEach((e=>{e.addEventListener("click",(()=>{t.style.display="block",o.style.left="-50%",window.innerWidth>768?n=setInterval(r,10):o.style.left="38%"}))})),t.addEventListener("click",(e=>{let o=e.target;!o.classList.contains("popup-close")&&o.closest(".popup-content")||(t.style.display="none")}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,a)=>{var r;e===n&&(r=a,o.forEach(((e,o)=>{o===r?(t[o].classList.add("active"),e.classList.remove("d-none")):(t[o].classList.remove("active"),e.classList.add("d-none"))})))}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let n,a=document.querySelectorAll(".dot"),r=0;e.forEach(((e,t)=>{let n=document.createElement("li");0===t?(n.classList.add("dot"),n.classList.add("dot-active")):n.classList.add("dot"),o.append(n)})),a=document.querySelectorAll(".dot");const c=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},l=()=>{c(e,r,"portfolio-item-active"),c(a,r,"dot-active"),r++,r===e.length&&(r=0),s(e,r,"portfolio-item-active"),s(a,r,"dot-active")},i=()=>{n=setInterval(l,2e3)};i(),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),t.addEventListener("click",(t=>{t.preventDefault();let o=t.target;(o.matches(".dot")||o.matches(".portfolio-btn"))&&(c(e,r,"portfolio-item-active"),c(a,r,"dot-active"),o.matches(".dot")?a.forEach(((e,t)=>{e===o&&(r=t)})):o.matches("#arrow-right")?r++:o.matches("#arrow-left")&&r--,r>=e.length?r=0:r<0&&(r=e.length-1),s(e,r,"portfolio-item-active"),s(a,r,"dot-active"))}))})(),document.querySelectorAll(".command img").forEach((e=>{const t=e.src;e.addEventListener("mouseenter",(()=>{e.src=e.dataset.img})),e.addEventListener("mouseleave",(()=>{e.src=t}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),c=document.getElementById("total");document.querySelector(".calc").addEventListener("input",(e=>{e.target.matches("input")&&(e.target.value=e.target.value.replace(/[^\d]/g,""))}));t.addEventListener("change",(t=>{const s=t.target;s!==o&&s!==n&&s!==a&&s!==r||(()=>{let t=0,s=1,l=1;const i=o.options[o.selectedIndex].value,u=+n.value;r.value>1&&(s+=(r.value-1)/10),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),i&&u&&(t=e*i*u*s*l),c.textContent=t,function({timing:e,draw:t,duration:o}){let n=performance.now();requestAnimationFrame((function a(r){let c=(r-n)/o;c>1&&(c=1);let s=e(c);t(s),c<1&&requestAnimationFrame(a)}))}({duration:1e3,timing:e=>e,draw(e){c.textContent=Math.floor(e*t)}})})()}))})(100),t("form1"),t("form2"),t("form3")})();