(()=>{"use strict";const e=document.querySelector("menu").querySelectorAll("a"),t=document.querySelector("main").querySelector("a");t.addEventListener("click",(e=>{e.preventDefault();const o=t.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}));for(const t of e)t.addEventListener("click",(e=>{e.preventDefault();const o=t.getAttribute("href");"#close"!==o&&document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}));const o=e=>{const t=document.getElementById(e),o=document.createElement("div"),n=document.querySelectorAll(`#${e} input`);o.style.cssText="font-size: 2rem; color: white",t.addEventListener("input",(e=>{e.target.matches('input[name="user_phone"]')&&(e.target.setAttribute("pattern","^[0-9-+s()]{11,18}$"),e.target.value=e.target.value.replace(/[^\d\+]/g,""))})),t.addEventListener("input",(e=>{e.target.matches('input[name="user_email"]')&&(e.target.setAttribute("pattern","^[A-Za-z0-9.-_]+@[A-Za-z]+.[A-Za-z]{2,3}$"),e.target.value=e.target.value.replace(/[^A-Za-z\d\.\-@_]/g,""))})),t.addEventListener("input",(e=>{e.target.matches('input[name="user_name"]')&&(e.target.setAttribute("pattern","[А-Яа-яЁё ]{2,}"),e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s]|/g,""))})),t.addEventListener("input",(e=>{e.target.matches('input[name="user_message"]')&&(e.target.value=e.target.value.replace(/[^А-Яа-яЁё\d\s,\.\?\(\)\*\+\$-:;!'"@&%#№]/g,""))})),t.addEventListener("submit",(e=>{e.preventDefault(),t.append(o),o.textContent="Загрузка...";const r=new FormData(t);let a={};var c;r.forEach(((e,t)=>a[t]=e)),(c=a,new Promise(((e,t)=>{const o=new XMLHttpRequest;o.addEventListener("readystatechange",(()=>{4===o.readyState&&(200===o.status?e():t(o.statusText))})),o.open("POST","server.php"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(c))}))).then((()=>o.textContent="Спасибо! Мы скоро с вами свяжемся!")).catch((e=>{o.textContent="Что-то пошло не так...",console.log(e)})),n.forEach((e=>e.value=""))}))};(function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");let r;r=setInterval((function(){const a=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/3600),minutes:n,seconds:o}}();a.timeRemaining<=0?(t.textContent="00",o.textContent="00",n.textContent="00",clearInterval(r)):(t.textContent=a.hours<10?"0"+a.hours:a.hours,o.textContent=a.minutes<10?"0"+a.minutes:a.minutes,n.textContent=a.seconds<10?"0"+a.seconds:a.seconds)}),1e3)})("28 april 2021"),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{let o=t.target;o.closest(".menu")||o.classList.contains("close-btn")||o.matches("ul>li>a")?e.classList.toggle("active-menu"):o.closest(".active-menu")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=(document.querySelector(".popup-close"),document.querySelector(".popup-content"));let n,r=0;const a=()=>{r++,parseFloat(o.style.left)<38?o.style.left=r+"%":(clearInterval(n),r=0)};e.forEach((e=>{e.addEventListener("click",(()=>{t.style.display="block",o.style.left="-50%",window.innerWidth>768?n=setInterval(a,10):o.style.left="38%"}))})),t.addEventListener("click",(e=>{let o=e.target;!o.classList.contains("popup-close")&&o.closest(".popup-content")||(t.style.display="none")}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,r)=>{var a;e===n&&(a=r,o.forEach(((e,o)=>{o===a?(t[o].classList.add("active"),e.classList.remove("d-none")):(t[o].classList.remove("active"),e.classList.add("d-none"))})))}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let n,r=document.querySelectorAll(".dot"),a=0;e.forEach(((e,t)=>{let n=document.createElement("li");0===t?(n.classList.add("dot"),n.classList.add("dot-active")):n.classList.add("dot"),o.append(n)})),r=document.querySelectorAll(".dot");const c=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},l=()=>{c(e,a,"portfolio-item-active"),c(r,a,"dot-active"),a++,a===e.length&&(a=0),s(e,a,"portfolio-item-active"),s(r,a,"dot-active")},u=()=>{n=setInterval(l,2e3)};u(),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),t.addEventListener("click",(t=>{t.preventDefault();let o=t.target;(o.matches(".dot")||o.matches(".portfolio-btn"))&&(c(e,a,"portfolio-item-active"),c(r,a,"dot-active"),o.matches(".dot")?r.forEach(((e,t)=>{e===o&&(a=t)})):o.matches("#arrow-right")?a++:o.matches("#arrow-left")&&a--,a>=e.length?a=0:a<0&&(a=e.length-1),s(e,a,"portfolio-item-active"),s(r,a,"dot-active"))}))})(),document.querySelectorAll(".command img").forEach((e=>{const t=e.src;e.addEventListener("mouseenter",(()=>{e.src=e.dataset.img})),e.addEventListener("mouseleave",(()=>{e.src=t}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total");document.querySelector(".calc").addEventListener("input",(e=>{e.target.matches("input")&&(e.target.value=e.target.value.replace(/[^\d]/g,""))}));t.addEventListener("change",(t=>{const s=t.target;s!==o&&s!==n&&s!==r&&s!==a||(()=>{let t=0,s=1,l=1;const u=o.options[o.selectedIndex].value,i=+n.value;a.value>1&&(s+=(a.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),u&&i&&(t=e*u*i*s*l),c.textContent=t,function({timing:e,draw:t,duration:o}){let n=performance.now();requestAnimationFrame((function r(a){let c=(a-n)/o;c>1&&(c=1);let s=e(c);t(s),c<1&&requestAnimationFrame(r)}))}({duration:1e3,timing:e=>e,draw(e){c.textContent=Math.floor(e*t)}})})()}))})(100),o("form1"),o("form2"),o("form3")})();